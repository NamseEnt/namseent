(function () {
    'use strict';

    function runAsyncMessageLoop(target, handleRequest) {
        target.onmessage = async ({ data }) => {
            switch (data.type) {
                case "request":
                    {
                        const response = await handleRequest(data.inner);
                        target.postMessage({
                            id: data.id,
                            type: "response",
                            inner: response,
                        });
                    }
                    break;
                case "response":
                    {
                        const { id, inner } = data;
                        const resolve = waitingResponseMap.get(id);
                        if (!resolve) {
                            throw new Error("no resolve for id " + id);
                        }
                        resolve(inner);
                    }
                    break;
            }
        };
    }
    const waitingResponseMap = new Map();
    let nextRequestId = 0;
    function sendAsyncRequest(target, request, transfer) {
        const id = nextRequestId++;
        return new Promise((resolve) => {
            waitingResponseMap.set(id, resolve);
            target.postMessage({
                id,
                type: "request",
                inner: request,
            }, transfer ?? []);
        });
    }

    const queue = [];
    async function waitWebEvent() {
        while (queue.length === 0) {
            await new Promise((resolve) => setTimeout(resolve, 0));
        }
        return queue.shift();
    }
    document.addEventListener("mouseup", (e) => {
        e.preventDefault();
        queue.push({
            MouseDown: {
                x: e.clientX,
                y: e.clientY,
            },
        });
    });

    // sab i32 [0] = notification flag. 0: request, 1: response
    // sab i32 [1] = message length
    // sab u8 [8~] = message body
    async function runMessageLoopForMain(sab, handleMessage) {
        const i32Buf = new Int32Array(sab);
        while (true) {
            // TODO: Check if the message already sent by the worker. maybe timeout and retry?
            const wait = Atomics.waitAsync(i32Buf, 0, 0);
            if (wait.async) {
                await wait.value;
            }
            const message = readMessage(sab);
            const response = await handleMessage(message);
            writeMessage(response, i32Buf);
            Atomics.notify(i32Buf, 0);
        }
    }
    function readMessage(sab) {
        const messageLength = new Int32Array(sab)[1];
        const messageBuf = new Uint8Array(sab, 8, messageLength);
        // NOTE: this is for error "The provided ArrayBufferView value must not be shared."
        const cloned = new ArrayBuffer(messageBuf.byteLength);
        new Uint8Array(cloned).set(new Uint8Array(messageBuf));
        const textDecoder = new TextDecoder();
        const message = textDecoder.decode(cloned);
        return JSON.parse(message);
    }
    function writeMessage(message, i32Buf) {
        const textEncoder = new TextEncoder();
        const messageBuf = textEncoder.encode(JSON.stringify(message));
        const messageLength = messageBuf.length;
        i32Buf[1] = messageLength;
        const buffer = new Uint8Array(i32Buf.buffer, 8, messageLength);
        buffer.set(messageBuf);
    }

    const workerToMainBufferSab = new SharedArrayBuffer(16 * 1024 * 1024);
    const mainToWorkerBufferSab = new SharedArrayBuffer(16 * 1024 * 1024);
    runMessageLoopForMain(workerToMainBufferSab, async (message) => {
        switch (message.type) {
            case "getBaseUrl": {
                return {
                    baseUrl: window.document.URL,
                };
            }
            case "webEvent": {
                const webEvent = await waitWebEvent();
                return {
                    webEvent,
                };
            }
        }
    });
    const canvas = document.createElement("canvas");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    canvas.style.width = "100%";
    canvas.style.height = "100%";
    canvas.id = "canvas";
    document.body.appendChild(canvas);
    const bitmapRendererCtx = canvas.getContext("bitmaprenderer");
    if (!bitmapRendererCtx) {
        throw new Error("no bitmapRendererCtx");
    }
    window.addEventListener("resize", () => {
        myWorker.postMessage({
            type: "windowResize",
            width: window.innerWidth,
            height: window.innerHeight,
        });
    });
    const myWorker = new Worker("worker.js", {
        type: "classic",
    });
    runAsyncMessageLoop(myWorker, async (message) => {
        switch (message.type) {
            case "imageBitmap": {
                const { imageBitmap, } = message;
                bitmapRendererCtx.transferFromImageBitmap(imageBitmap);
                return {};
            }
        }
    });
    sendAsyncRequest(myWorker, {
        type: "init",
        workerToMainBufferSab,
        mainToWorkerBufferSab,
        windowWidth: window.innerWidth,
        windowHeight: window.innerHeight,
    }, []);
    myWorker.postMessage;
    myWorker.onerror = (e) => {
        console.error(e, "error on worker");
    };
    myWorker.onmessageerror = (e) => {
        console.log("message error from worker", e);
    };
    document.oncontextmenu = (event) => {
        event.preventDefault();
    };

})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXMiOlsiLi4vd2ViQ29kZS9zcmMvYXN5bmNNZXNzYWdlLnRzIiwiLi4vd2ViQ29kZS9zcmMvbWFpbi93ZWJFdmVudC50cyIsIi4uL3dlYkNvZGUvc3JjL21lc3NhZ2VMb29wLnRzIiwiLi4vd2ViQ29kZS9zcmMvbWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJ0eXBlIE1ldGFNZXNzYWdlID0ge1xuICAgIGlkOiBudW1iZXI7XG4gICAgdHlwZTogXCJyZXF1ZXN0XCIgfCBcInJlc3BvbnNlXCI7XG4gICAgaW5uZXI6IGFueTtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBydW5Bc3luY01lc3NhZ2VMb29wKFxuICAgIHRhcmdldDoge1xuICAgICAgICBvbm1lc3NhZ2U6ICgocmVxdWVzdDogYW55KSA9PiBhbnkpIHwgbnVsbDtcbiAgICAgICAgcG9zdE1lc3NhZ2U6IChyZXNwb25zZTogYW55KSA9PiB2b2lkO1xuICAgIH0sXG4gICAgaGFuZGxlUmVxdWVzdDogKHJlcXVlc3Q6IGFueSkgPT4gUHJvbWlzZTxhbnk+LFxuKSB7XG4gICAgdGFyZ2V0Lm9ubWVzc2FnZSA9IGFzeW5jICh7IGRhdGEgfTogeyBkYXRhOiBNZXRhTWVzc2FnZSB9KSA9PiB7XG4gICAgICAgIHN3aXRjaCAoZGF0YS50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFwicmVxdWVzdFwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBoYW5kbGVSZXF1ZXN0KGRhdGEuaW5uZXIpO1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXQucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGRhdGEuaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcInJlc3BvbnNlXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbm5lcjogcmVzcG9uc2UsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZXNwb25zZVwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBpZCwgaW5uZXIgfSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc29sdmUgPSB3YWl0aW5nUmVzcG9uc2VNYXAuZ2V0KGlkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyByZXNvbHZlIGZvciBpZCBcIiArIGlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGlubmVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCB3YWl0aW5nUmVzcG9uc2VNYXAgPSBuZXcgTWFwPG51bWJlciwgKHJlc3BvbnNlOiBhbnkpID0+IHZvaWQ+KCk7XG5sZXQgbmV4dFJlcXVlc3RJZCA9IDA7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZW5kQXN5bmNSZXF1ZXN0KFxuICAgIHRhcmdldDoge1xuICAgICAgICBwb3N0TWVzc2FnZTogKHJlc3BvbnNlOiBhbnksIHRyYW5zZmVyOiBUcmFuc2ZlcmFibGVbXSkgPT4gdm9pZDtcbiAgICB9LFxuICAgIHJlcXVlc3Q6IGFueSxcbiAgICB0cmFuc2Zlcj86IFRyYW5zZmVyYWJsZVtdLFxuKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCBpZCA9IG5leHRSZXF1ZXN0SWQrKztcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgd2FpdGluZ1Jlc3BvbnNlTWFwLnNldChpZCwgcmVzb2x2ZSk7XG5cbiAgICAgICAgdGFyZ2V0LnBvc3RNZXNzYWdlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgICAgIHR5cGU6IFwicmVxdWVzdFwiLFxuICAgICAgICAgICAgICAgIGlubmVyOiByZXF1ZXN0LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHRyYW5zZmVyID8/IFtdLFxuICAgICAgICApO1xuICAgIH0pO1xufVxuIiwidHlwZSBXZWJFdmVudCA9IHtcbiAgICBNb3VzZURvd246IHtcbiAgICAgICAgeDogbnVtYmVyO1xuICAgICAgICB5OiBudW1iZXI7XG4gICAgfTtcbn07XG5cbmNvbnN0IHF1ZXVlOiBXZWJFdmVudFtdID0gW107XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YWl0V2ViRXZlbnQoKTogUHJvbWlzZTxXZWJFdmVudD4ge1xuICAgIHdoaWxlIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xuICAgIH1cbiAgICByZXR1cm4gcXVldWUuc2hpZnQoKSE7XG59XG5cbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZXVwXCIsIChlKSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHF1ZXVlLnB1c2goe1xuICAgICAgICBNb3VzZURvd246IHtcbiAgICAgICAgICAgIHg6IGUuY2xpZW50WCxcbiAgICAgICAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgICAgfSxcbiAgICB9KTtcbn0pO1xuIiwiLy8gc2FiIGkzMiBbMF0gPSBub3RpZmljYXRpb24gZmxhZy4gMDogcmVxdWVzdCwgMTogcmVzcG9uc2Vcbi8vIHNhYiBpMzIgWzFdID0gbWVzc2FnZSBsZW5ndGhcbi8vIHNhYiB1OCBbOH5dID0gbWVzc2FnZSBib2R5XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW5NZXNzYWdlTG9vcEZvck1haW4oXG4gICAgc2FiOiBTaGFyZWRBcnJheUJ1ZmZlcixcbiAgICBoYW5kbGVNZXNzYWdlOiAocmVxdWVzdDogYW55KSA9PiBQcm9taXNlPGFueT4sXG4pIHtcbiAgICBjb25zdCBpMzJCdWYgPSBuZXcgSW50MzJBcnJheShzYWIpO1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIC8vIFRPRE86IENoZWNrIGlmIHRoZSBtZXNzYWdlIGFscmVhZHkgc2VudCBieSB0aGUgd29ya2VyLiBtYXliZSB0aW1lb3V0IGFuZCByZXRyeT9cbiAgICAgICAgY29uc3Qgd2FpdCA9IEF0b21pY3Mud2FpdEFzeW5jKGkzMkJ1ZiwgMCwgMCk7XG4gICAgICAgIGlmICh3YWl0LmFzeW5jKSB7XG4gICAgICAgICAgICBhd2FpdCB3YWl0LnZhbHVlO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHJlYWRNZXNzYWdlKHNhYik7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgaGFuZGxlTWVzc2FnZShtZXNzYWdlKTtcbiAgICAgICAgd3JpdGVNZXNzYWdlKHJlc3BvbnNlLCBpMzJCdWYpO1xuICAgICAgICBBdG9taWNzLm5vdGlmeShpMzJCdWYsIDApO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVhZE1lc3NhZ2Uoc2FiOiBTaGFyZWRBcnJheUJ1ZmZlcik6IGFueSB7XG4gICAgY29uc3QgbWVzc2FnZUxlbmd0aCA9IG5ldyBJbnQzMkFycmF5KHNhYilbMV07XG4gICAgY29uc3QgbWVzc2FnZUJ1ZiA9IG5ldyBVaW50OEFycmF5KHNhYiwgOCwgbWVzc2FnZUxlbmd0aCk7XG5cbiAgICAvLyBOT1RFOiB0aGlzIGlzIGZvciBlcnJvciBcIlRoZSBwcm92aWRlZCBBcnJheUJ1ZmZlclZpZXcgdmFsdWUgbXVzdCBub3QgYmUgc2hhcmVkLlwiXG4gICAgY29uc3QgY2xvbmVkID0gbmV3IEFycmF5QnVmZmVyKG1lc3NhZ2VCdWYuYnl0ZUxlbmd0aCk7XG4gICAgbmV3IFVpbnQ4QXJyYXkoY2xvbmVkKS5zZXQobmV3IFVpbnQ4QXJyYXkobWVzc2FnZUJ1ZikpO1xuXG4gICAgY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbiAgICBjb25zdCBtZXNzYWdlID0gdGV4dERlY29kZXIuZGVjb2RlKGNsb25lZCk7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UobWVzc2FnZSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB3cml0ZU1lc3NhZ2UobWVzc2FnZTogYW55LCBpMzJCdWY6IEludDMyQXJyYXkpIHtcbiAgICBjb25zdCB0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgIGNvbnN0IG1lc3NhZ2VCdWYgPSB0ZXh0RW5jb2Rlci5lbmNvZGUoSlNPTi5zdHJpbmdpZnkobWVzc2FnZSkpO1xuICAgIGNvbnN0IG1lc3NhZ2VMZW5ndGggPSBtZXNzYWdlQnVmLmxlbmd0aDtcblxuICAgIGkzMkJ1ZlsxXSA9IG1lc3NhZ2VMZW5ndGg7XG4gICAgY29uc3QgYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoaTMyQnVmLmJ1ZmZlciwgOCwgbWVzc2FnZUxlbmd0aCk7XG4gICAgYnVmZmVyLnNldChtZXNzYWdlQnVmKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJsb2NraW5nUmVxdWVzdChcbiAgICByZXF1ZXN0OiBhbnksXG4gICAgcmVxdWVzdFNhYjogU2hhcmVkQXJyYXlCdWZmZXIsXG4pOiBhbnkge1xuICAgIGNvbnN0IGkzMkJ1ZiA9IG5ldyBJbnQzMkFycmF5KHJlcXVlc3RTYWIpO1xuXG4gICAgY29uc29sZS5sb2coXCJyZXF1ZXN0XCIsIHJlcXVlc3QpO1xuICAgIHdyaXRlTWVzc2FnZShyZXF1ZXN0LCBpMzJCdWYpO1xuXG4gICAgaTMyQnVmWzBdID0gMDtcbiAgICBBdG9taWNzLm5vdGlmeShpMzJCdWYsIDApO1xuICAgIEF0b21pY3Mud2FpdChpMzJCdWYsIDAsIDApO1xuXG4gICAgY29uc3QgcmVzcG9uc2UgPSByZWFkTWVzc2FnZShyZXF1ZXN0U2FiKTtcbiAgICBjb25zb2xlLmxvZyhcInJlc3BvbnNlXCIsIHJlc3BvbnNlKTtcblxuICAgIHJldHVybiByZXNwb25zZTtcbn1cbiIsImltcG9ydCB7IHJ1bkFzeW5jTWVzc2FnZUxvb3AsIHNlbmRBc3luY1JlcXVlc3QgfSBmcm9tIFwiLi9hc3luY01lc3NhZ2UuanNcIjtcbmltcG9ydCB7IHdhaXRXZWJFdmVudCB9IGZyb20gXCIuL21haW4vd2ViRXZlbnQuanNcIjtcbmltcG9ydCB7IHJ1bk1lc3NhZ2VMb29wRm9yTWFpbiB9IGZyb20gXCIuL21lc3NhZ2VMb29wLmpzXCI7XG5cbmNvbnN0IHdvcmtlclRvTWFpbkJ1ZmZlclNhYiA9IG5ldyBTaGFyZWRBcnJheUJ1ZmZlcigxNiAqIDEwMjQgKiAxMDI0KTtcbmNvbnN0IG1haW5Ub1dvcmtlckJ1ZmZlclNhYiA9IG5ldyBTaGFyZWRBcnJheUJ1ZmZlcigxNiAqIDEwMjQgKiAxMDI0KTtcblxucnVuTWVzc2FnZUxvb3BGb3JNYWluKHdvcmtlclRvTWFpbkJ1ZmZlclNhYiwgYXN5bmMgKG1lc3NhZ2UpID0+IHtcbiAgICBzd2l0Y2ggKG1lc3NhZ2UudHlwZSkge1xuICAgICAgICBjYXNlIFwiZ2V0QmFzZVVybFwiOiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGJhc2VVcmw6IHdpbmRvdy5kb2N1bWVudC5VUkwsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgXCJ3ZWJFdmVudFwiOiB7XG4gICAgICAgICAgICBjb25zdCB3ZWJFdmVudCA9IGF3YWl0IHdhaXRXZWJFdmVudCgpO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB3ZWJFdmVudCxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKTtcbmNhbnZhcy53aWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuY2FudmFzLmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbmNhbnZhcy5zdHlsZS53aWR0aCA9IFwiMTAwJVwiO1xuY2FudmFzLnN0eWxlLmhlaWdodCA9IFwiMTAwJVwiO1xuY2FudmFzLmlkID0gXCJjYW52YXNcIjtcbmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbmNvbnN0IGJpdG1hcFJlbmRlcmVyQ3R4ID0gY2FudmFzLmdldENvbnRleHQoXCJiaXRtYXByZW5kZXJlclwiKTtcbmlmICghYml0bWFwUmVuZGVyZXJDdHgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJubyBiaXRtYXBSZW5kZXJlckN0eFwiKTtcbn1cblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIiwgKCkgPT4ge1xuICAgIG15V29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgdHlwZTogXCJ3aW5kb3dSZXNpemVcIixcbiAgICAgICAgd2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICBoZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICB9KTtcbn0pO1xuXG5jb25zdCBteVdvcmtlciA9IG5ldyBXb3JrZXIoXCJ3b3JrZXIuanNcIiwge1xuICAgIHR5cGU6IFwiY2xhc3NpY1wiLFxufSk7XG5cbnJ1bkFzeW5jTWVzc2FnZUxvb3AobXlXb3JrZXIsIGFzeW5jIChtZXNzYWdlKSA9PiB7XG4gICAgc3dpdGNoIChtZXNzYWdlLnR5cGUpIHtcbiAgICAgICAgY2FzZSBcImltYWdlQml0bWFwXCI6IHtcbiAgICAgICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgICAgICBpbWFnZUJpdG1hcCxcbiAgICAgICAgICAgIH06IHtcbiAgICAgICAgICAgICAgICBpbWFnZUJpdG1hcDogSW1hZ2VCaXRtYXA7XG4gICAgICAgICAgICB9ID0gbWVzc2FnZTtcblxuICAgICAgICAgICAgYml0bWFwUmVuZGVyZXJDdHgudHJhbnNmZXJGcm9tSW1hZ2VCaXRtYXAoaW1hZ2VCaXRtYXApO1xuXG4gICAgICAgICAgICByZXR1cm4ge307XG4gICAgICAgIH1cbiAgICB9XG59KTtcblxuc2VuZEFzeW5jUmVxdWVzdChcbiAgICBteVdvcmtlcixcbiAgICB7XG4gICAgICAgIHR5cGU6IFwiaW5pdFwiLFxuICAgICAgICB3b3JrZXJUb01haW5CdWZmZXJTYWIsXG4gICAgICAgIG1haW5Ub1dvcmtlckJ1ZmZlclNhYixcbiAgICAgICAgd2luZG93V2lkdGg6IHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICB3aW5kb3dIZWlnaHQ6IHdpbmRvdy5pbm5lckhlaWdodCxcbiAgICB9LFxuICAgIFtdLFxuKTtcbm15V29ya2VyLnBvc3RNZXNzYWdlO1xuXG5teVdvcmtlci5vbmVycm9yID0gKGUpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKGUsIFwiZXJyb3Igb24gd29ya2VyXCIpO1xufTtcblxubXlXb3JrZXIub25tZXNzYWdlZXJyb3IgPSAoZSkgPT4ge1xuICAgIGNvbnNvbGUubG9nKFwibWVzc2FnZSBlcnJvciBmcm9tIHdvcmtlclwiLCBlKTtcbn07XG5cbmRvY3VtZW50Lm9uY29udGV4dG1lbnUgPSAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xufTtcbiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7SUFNZ0IsU0FBQSxtQkFBbUIsQ0FDL0IsTUFHQyxFQUNELGFBQTZDLEVBQUE7UUFFN0MsTUFBTSxDQUFDLFNBQVMsR0FBRyxPQUFPLEVBQUUsSUFBSSxFQUF5QixLQUFJO1lBQ3pELFFBQVEsSUFBSSxDQUFDLElBQUk7SUFDYixZQUFBLEtBQUssU0FBUztJQUNWLGdCQUFBO3dCQUNJLE1BQU0sUUFBUSxHQUFHLE1BQU0sYUFBYSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQzt3QkFDakQsTUFBTSxDQUFDLFdBQVcsQ0FBQzs0QkFDZixFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUU7SUFDWCx3QkFBQSxJQUFJLEVBQUUsVUFBVTtJQUNoQix3QkFBQSxLQUFLLEVBQUUsUUFBUTtJQUNsQixxQkFBQSxDQUFDLENBQUM7SUFD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
